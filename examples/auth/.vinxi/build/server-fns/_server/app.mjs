import{createComponent as m,isServer as L,getRequestEvent as q,delegateEvents as M,spread as N,useAssets as D,ssr as V,escape as x}from"solid-js/web";import{children as W,createMemo as A,getOwner as H,untrack as J,Show as $,on as _,createRoot as z,createSignal as G,onCleanup as P,sharedConfig as S,createContext as Q,createUniqueId as X,useContext as Y,createRenderEffect as Z,Suspense as ee}from"solid-js";import{F as te}from"./server-fns.mjs";import{S as re}from"./client.mjs";import{j as ne,k as oe,R as ae,l as ie,n as se,o as j,p as ce,q as I,r as ue,t as le,u as de,v as fe,w as me}from"./cache.mjs";import"solid-js/web/storage";import"h3";import"node:async_hooks";import"./c_102kcj3.mjs";import"./auth.mjs";import"@auth/core";import"@auth/core/errors";import"@auth/core/providers/discord";import"@auth/core/providers/credentials";import"zod";import"./c_10jsfi6.mjs";import"./c_ymyeph.mjs";import"./response.mjs";const F=e=>t=>{const{base:r}=t,o=W(()=>t.children),n=A(()=>ne(o(),t.base||""));let a;const i=oe(e,n,()=>a,{base:r,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(i),m(ae.Provider,{value:i,get children(){return m(he,{routerState:i,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[(a=H())&&null,m(pe,{routerState:i,get branches(){return n()}})]}})}})};function he(e){const t=e.routerState.location,r=e.routerState.params,o=A(()=>e.preload&&J(()=>{I(!0),e.preload({params:r,location:t,intent:ce()||"initial"}),I(!1)}));return m($,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:n=>m(n,{params:r,location:t,get data(){return o()},get children(){return e.children}})})}function pe(e){if(L){const n=q();if(n&&n.router&&n.router.dataOnly){ge(n,e.routerState,e.branches);return}n&&((n.router||(n.router={})).matches||(n.router.matches=e.routerState.matches().map(({route:a,path:i,params:u})=>({path:a.originalPath,pattern:a.pattern,match:i,params:u,info:a.info}))))}const t=[];let r;const o=A(_(e.routerState.matches,(n,a,i)=>{let u=a&&n.length===a.length;const h=[];for(let l=0,p=n.length;l<p;l++){const g=a&&a[l],b=n[l];i&&g&&b.route.key===g.route.key?h[l]=i[l]:(u=!1,t[l]&&t[l](),z(y=>{t[l]=y,h[l]=ie(e.routerState,h[l-1]||e.routerState.base,U(()=>o()[l+1]),()=>e.routerState.matches()[l])}))}return t.splice(n.length).forEach(l=>l()),i&&u?i:(r=h[0],h)}));return U(()=>o()&&r)()}const U=e=>()=>m($,{get when(){return e()},keyed:!0,children:t=>m(se.Provider,{value:t,get children(){return t.outlet()}})});function ge(e,t,r){const o=new URL(e.request.url),n=j(r,new URL(e.router.previousUrl||e.request.url).pathname),a=j(r,o.pathname);for(let i=0;i<a.length;i++){(!n[i]||a[i].route!==n[i].route)&&(e.router.dataOnly=!0);const{route:u,params:h}=a[i];u.preload&&u.preload({params:h,location:t.location,intent:"preload"})}}function we([e,t],r,o){return[e,o?n=>t(o(n)):t]}function be(e){let t=!1;const r=n=>typeof n=="string"?{value:n}:n,o=we(G(r(e.get()),{equals:(n,a)=>n.value===a.value&&n.state===a.state}),void 0,n=>(!t&&e.set(n),S.registry&&!S.done&&(S.done=!0),n));return e.init&&P(e.init((n=e.get())=>{t=!0,o[1](r(n)),t=!1})),F({signal:o,create:e.create,utils:e.utils})}function ye(e,t,r){return e.addEventListener(t,r),()=>e.removeEventListener(t,r)}function ve(e,t){const r=e&&document.getElementById(e);r?r.scrollIntoView():t&&window.scrollTo(0,0)}function Se(e){const t=new URL(e);return t.pathname+t.search}function Re(e){let t;const r={value:e.url||(t=q())&&Se(t.request.url)||""};return F({signal:[()=>r,o=>Object.assign(r,o)]})(e)}const Ce=new Map;function Ee(e=!0,t=!1,r="/_server",o){return n=>{const a=n.base.path(),i=n.navigatorFactory(n.base);let u={};function h(s){return s.namespaceURI==="http://www.w3.org/2000/svg"}function l(s){if(s.defaultPrevented||s.button!==0||s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)return;const c=s.composedPath().find(k=>k instanceof Node&&k.nodeName.toUpperCase()==="A");if(!c||t&&!c.hasAttribute("link"))return;const f=h(c),d=f?c.href.baseVal:c.href;if((f?c.target.baseVal:c.target)||!d&&!c.hasAttribute("state"))return;const w=(c.getAttribute("rel")||"").split(/\s+/);if(c.hasAttribute("download")||w&&w.includes("external"))return;const v=f?new URL(d,document.baseURI):new URL(d);if(!(v.origin!==window.location.origin||a&&v.pathname&&!v.pathname.toLowerCase().startsWith(a.toLowerCase())))return[c,v]}function p(s){const c=l(s);if(!c)return;const[f,d]=c,T=n.parsePath(d.pathname+d.search+d.hash),w=f.getAttribute("state");s.preventDefault(),i(T,{resolve:!1,replace:f.hasAttribute("replace"),scroll:!f.hasAttribute("noscroll"),state:w?JSON.parse(w):void 0})}function g(s){const c=l(s);if(!c)return;const[f,d]=c;typeof o=="function"&&(d.pathname=o(d.pathname)),u[d.pathname]||n.preloadRoute(d,{preloadData:f.getAttribute("preload")!=="false"})}function b(s){const c=l(s);if(!c)return;const[f,d]=c;typeof o=="function"&&(d.pathname=o(d.pathname)),!u[d.pathname]&&(u[d.pathname]=setTimeout(()=>{n.preloadRoute(d,{preloadData:f.getAttribute("preload")!=="false"}),delete u[d.pathname]},200))}function y(s){const c=l(s);if(!c)return;const[,f]=c;typeof o=="function"&&(f.pathname=o(f.pathname)),u[f.pathname]&&(clearTimeout(u[f.pathname]),delete u[f.pathname])}function O(s){if(s.defaultPrevented)return;let c=s.submitter&&s.submitter.hasAttribute("formaction")?s.submitter.getAttribute("formaction"):s.target.getAttribute("action");if(!c)return;if(!c.startsWith("https://action/")){const d=new URL(c,ue);if(c=n.parsePath(d.pathname+d.search),!c.startsWith(r))return}if(s.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const f=Ce.get(c);if(f){s.preventDefault();const d=new FormData(s.target,s.submitter);f.call({r:n,f:s.target},s.target.enctype==="multipart/form-data"?d:new URLSearchParams(d))}}M(["click","submit"]),document.addEventListener("click",p),e&&(document.addEventListener("mouseover",b),document.addEventListener("mouseout",y),document.addEventListener("focusin",g),document.addEventListener("touchstart",g)),document.addEventListener("submit",O),P(()=>{document.removeEventListener("click",p),e&&(document.removeEventListener("mouseover",b),document.removeEventListener("mouseout",y),document.removeEventListener("focusin",g),document.removeEventListener("touchstart",g)),document.removeEventListener("submit",O)})}}function Le(e){if(L)return Re(e);const t=()=>{const o=window.location.pathname.replace(/^\/+/,"/")+window.location.search,n=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:o+window.location.hash,state:n}},r=fe();return be({get:t,set({value:o,replace:n,scroll:a,state:i}){n?window.history.replaceState(le(i),"",o):window.history.pushState(i,"",o),ve(decodeURIComponent(window.location.hash.slice(1)),a),de()},init:o=>ye(window,"popstate",me(o,n=>{if(n&&n<0)return!r.confirm(n);{const a=t();return!r.confirm(a.value,{state:a.state})}})),create:Ee(e.preload,e.explicitLinks,e.actionBase,e.transformUrl),utils:{go:o=>window.history.go(o),beforeLeave:r}})(e)}const K=Q(),B=["title","meta"],C=[],E=["name","http-equiv","content","charset","media"].concat(["property"]),R=(e,t)=>{const r=Object.fromEntries(Object.entries(e.props).filter(([o])=>t.includes(o)).sort());return(Object.hasOwn(r,"name")||Object.hasOwn(r,"property"))&&(r.name=r.name||r.property,delete r.property),e.tag+JSON.stringify(r)};function Ae(){if(!S.context){const r=document.head.querySelectorAll("[data-sm]");Array.prototype.forEach.call(r,o=>o.parentNode.removeChild(o))}const e=new Map;function t(r){if(r.ref)return r.ref;let o=document.querySelector(`[data-sm="${r.id}"]`);return o?(o.tagName.toLowerCase()!==r.tag&&(o.parentNode&&o.parentNode.removeChild(o),o=document.createElement(r.tag)),o.removeAttribute("data-sm")):o=document.createElement(r.tag),o}return{addTag(r){if(B.indexOf(r.tag)!==-1){const a=r.tag==="title"?C:E,i=R(r,a);e.has(i)||e.set(i,[]);let u=e.get(i),h=u.length;u=[...u,r],e.set(i,u);let l=t(r);r.ref=l,N(l,r.props);let p=null;for(var o=h-1;o>=0;o--)if(u[o]!=null){p=u[o];break}return l.parentNode!=document.head&&document.head.appendChild(l),p&&p.ref&&p.ref.parentNode&&document.head.removeChild(p.ref),h}let n=t(r);return r.ref=n,N(n,r.props),n.parentNode!=document.head&&document.head.appendChild(n),-1},removeTag(r,o){const n=r.tag==="title"?C:E,a=R(r,n);if(r.ref){const i=e.get(a);if(i){if(r.ref.parentNode){r.ref.parentNode.removeChild(r.ref);for(let u=o-1;u>=0;u--)i[u]!=null&&document.head.appendChild(i[u].ref)}i[o]=null,e.set(a,i)}else r.ref.parentNode&&r.ref.parentNode.removeChild(r.ref)}}}}function Pe(){const e=[];return D(()=>V(Ne(e))),{addTag(t){if(B.indexOf(t.tag)!==-1){const r=t.tag==="title"?C:E,o=R(t,r),n=e.findIndex(a=>a.tag===t.tag&&R(a,r)===o);n!==-1&&e.splice(n,1)}return e.push(t),e.length},removeTag(t,r){}}}const Oe=e=>{const t=L?Pe():Ae();return m(K.Provider,{value:t,get children(){return e.children}})},Te=(e,t,r)=>(ke({tag:e,props:t,setting:r,id:X(),get name(){return t.name||t.property}}),null);function ke(e){const t=Y(K);if(!t)throw new Error("<MetaProvider /> should be in the tree");Z(()=>{const r=t.addTag(e);P(()=>t.removeTag(e,r))})}function Ne(e){return e.map(t=>{const o=Object.keys(t.props).map(a=>a==="children"?"":` ${a}="${x(t.props[a],!0)}"`).join("");let n=t.props.children;return Array.isArray(n)&&(n=n.join("")),t.setting?.close?`<${t.tag} data-sm="${t.id}"${o}>${t.setting?.escape?x(n):n||""}</${t.tag}>`:`<${t.tag} data-sm="${t.id}"${o}/>`}).join("")}const xe=e=>Te("title",e,{escape:!0,close:!0});function Xe(){return m(Le,{root:e=>m(Oe,{get children(){return[m(xe,{children:"SolidStart - Basic"}),m(ee,{get children(){return m(re,{get children(){return[e.children," "]}})}})]}}),get children(){return m(te,{})}})}export{Xe as default};
